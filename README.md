```
     __  _____________   _______   __________  ____  ______
    /  |/  / ____/ __ \ /  _/   | / ____/ __ \/ __ \/ ____/
   / /|_/ / __/ / / / / / // /| |/ /   / / / / /_/ / __/
  / /  / / /___/ /_/ /_/ // ___ / /___/ /_/ / _, _/ /___
 /_/  /_/_____/_____//___/_/  |_\____/\____/_/ |_/_____/

```

A set of [Moodle](http://moodle.org) plugins that integrate with
[MediaCore](http://mediacore.com).

Designed to work with Moodle 2.3+. Tested and compatible up to v2.6.

## Overview ##
These plugins provide a rich set of Moodle-MediaCore integrations using LMS-LTI
to connect with your MediaCore site without having to leave Moodle.

## Moodle Plugins ##

**Local** - `local/mediacore` - Provides a custom LTI integration that is used
by the other plugins.

**Repository** - `repository/mediacore` - Provides a custom 'repository' which
will be selectable from the left hand column of the Moodle "file picker".

**TinyMce** - `lib/editor/tinymce/plugins/mediacore` - Provides a rich
integration with MediaCore, allowing you to launch the "MediaCore Chooser" from
a custom button added to every TinyMCE editor.

**Filter** - `filter/mediacore` - Transforms the video URLs generated by the
TinyMCE and Repository plugins into MediaCore's embedded video player.


## Installation/Upgrade ##


### Upgrading from an older MediaCore Plugin: ###

To make the installation go smoothly we recommend you remove any old versions
of the MediaCore plugin from your Moodle install. This is done by removing the
following directories, if they exist:

- `path/to/moodle/filters/mediacore`
- `path/to/moodle/local/mediacore`
- `path/to/moodle/repository/mediacore`
- **Moodle 2.3:** `path/to/moodle/lib/editor/tinymce/tiny_mce/{version}/plugins/mediacore`
- **Moodle 2.4+:** `path/to/moodle/lib/editor/tinymce/plugins/mediacore`



After doing this you will also need to Navigate to: `Site administration ->
Plugins -> Plugins Overview` and **uninstall** the following MediaCore plugin code
from the Moodle database:

- `MediaCore media filter`
- `Mediacore search`
- `MediaCore media picker`
- `Mediacore package libraries`

** Note: any previous Moodle/MediaCore settings will be removed when you delete
  or upgrade the MediaCore plugin from v1.6 to v2.0. These old v1.6 settings are
  no longer valid.*

Once any old versions have been removed, you can begin to install the new
version of the plugin.

### Installing/Upgrading the MediaCore Plugin: ###

Upgrading the MediaCore plugin v2.0 is done by copying the following folders into
the correct Moodle directories.

- copy `filters/mediacore` into `path/to/moodle/filters/`
- **Moodle 2.3:** copy `lib/editor/tinymce/mediacore` **into** `path/to/moodle/lib/editor/tinymce/tiny_mce/{version}/plugins/`
- **Moodle 2.4:** copy `lib/editor/tinymce/plugins/mediacore` **into**
  `path/to/moodle/lib/editor/tinymce/plugins/`
- copy `local/mediacore` into `path/to/moodle/local/`
- copy `repository/mediacore` into `path/to/moodle/repository/`

To finalize the installation you will need to navigate to: `Site administration
-> Notifications` and click "Check for available updates". Click "Upgrade
Moodle database now" to complete this step.

### Moodle/MediaCore LTI configuration setup: ###

To hook your MediaCore site into Moodle you must navigate to: `Site
administration -> Plugins -> Local plugins -> MediaCore package config` and enter:

- the `HOSTNAME` of your MediaCore site (i.e. demo.mediacore.tv).
- the name of your `LTI consumer key` (this must match a valid LTI consumer in
  your MediaCore site)
- the secret of your `LTI shared secret` (this also must match the secret in the
  LTI consumer above)

### Moodle/MediaCore TinyMCE plugin configuration setup: ###

For **Moodle 2.3** installations:

1. Move the `editor_plugin.js` file from `/lib/editor/tinymce/plugins/mediacore/tinymce` to `lib/editor/tinymce/tiny_mce/{version}/plugins/mediacore/` and **rename** it to `editor_plugin_src.js`.
2. Move the `img/` directory from `/lib/editor/tinymce/plugins/mediacore/tinymce` to `lib/editor/tinymce/tiny_mce/{version}/plugins/mediacore/`
3. Then, delete the `/lib/editor/tinymce/plugins/mediacore/tinymce` directory.
3. Now we need to let Moodle know about the MediaCore TinyMCE plugin. Open:
    `/path/to/moodle/lib/editor/tinymce/lib.php`

4. At the bottom of the `get_init_params` function, just above `return $params`, add the following lines of code:

    ~~~~~~~
    //for mediacore
    if (class_exists('mediacore_client', true /* autoload */)) {
        $mcore_client = new mediacore_client();
        $params = $mcore_client->configure_tinymce_lib_params($filters, $params);
    }
    ~~~~~~~

For **Moodle 2.4+** installations:

- Once the `lib/editor/tinymce/plugins/mediacore` directory is in place, configuration is automatic.


### Moodle/MediaCore Filter configuration setup: ###

In order for videos to display in Moodle, you must enable the MediaCore Filter.
This can be turned on by navigating to: `Site administration -> Plugins ->
Filters -> Manage Filters` and selecting `On` from drop down menu in the
`active` column next to 'MediaCore media filter'.

### Moodle/MediaCore Repository configuration setup: ###

You will also need to enable the repository. it may be turned on by navigating
to: `Site administration -> Plugins -> Repositories -> Manage Repositories` and
selecting `Enabled and visible` from drop down menu next to "MediaCore
search".

## Support Links ##

- [How do I download and install the MediaCore plugin for Moodle?](http://support.mediacore.com/customer/portal/articles/1122218-how-do-i-download-and-install-the-mediacore-plugin-for-moodle-v2-0-)
- [How do I use the Moodle File Picker to embed content into Moodle?](http://support.mediacore.com/customer/portal/articles/1124220-how-do-i-use-the-file-picker-to-embed-content-into-moodle-)
- [How do I use the MediaCore Chooser to embed content into Moodle?](http://support.mediacore.com/customer/portal/articles/1124241-how-do-i-use-the-chooser-to-embed-content-into-moodle-)


## About ##

[MediaCore](http://mediacore.com/) is an online video platform for managing,
encoding, monetizing and delivering video to mobile and desktop devices.
MediaCore makes it easy for any organization to share video either publicly or
privately and build an amazing user experience on both desktop and mobile
browsers around their own content.

Who's using Mediacore? More and more MediaCore powered sites are popping up all
over the world. You can learn more about some of these sites here on our
[MediaCore showcase](http://mediacore.com/why-mediacore).
